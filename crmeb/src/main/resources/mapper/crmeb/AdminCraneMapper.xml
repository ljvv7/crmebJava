<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zbkj.crmeb.nsl.nslemons.dao.AdminCraneMapper">

    <select id="getAdmCraneList" resultType="com.zbkj.crmeb.nsl.nslwxapp.model.NslCrane">
        select A.id,A.name,A.cbrands,B.name brand_name,A.maxweight,A.introduce,A.images,
                A.expdbcodes,A.guide_price,A.iscollected,A.longitude,A.latitude,A.visits,A.remarks
        from `nsl_crane` A
        left join `nsl_cbrands` B on A.cbrands = B.id
        where A.kbn != '9'
        <if test="cbrandid!=null and cbrandid!=''">
            and A.cbrands = #{cbrandid}
        </if>
        <if test="craneid!=null and craneid!=''">
            and A.id = #{craneid}
        </if>
        <if test="craneName!=null and craneName!=''">
            and name like "%"#{craneName,jdbcType=VARCHAR}"%"
        </if>
        limit #{pageindex},#{pagesize};
    </select>

    <select id="getAdmCraneListCount" resultType="int">
        select count(1)
        from `nsl_crane`
        where kbn != '9'
        <if test="cbrandid!=null and cbrandid!=''">
            and cbrands = #{cbrandid}
        </if>
        <if test="craneid!=null and craneid!=''">
            and id = #{craneid}
        </if>
        <if test="craneName!=null and craneName!=''">
            and name like "%"#{craneName,jdbcType=VARCHAR}"%"
        </if>
        ;
    </select>
    
    <insert id="addCrane">
        insert into nsl_crane (name, cbrands, maxweight, introduce, images, guide_price)
        values (#{name},#{cbrands},#{maxweight},#{introduce},#{images},#{guidePrice});
    </insert>

    <update id="removeCrane" parameterType="int">
        update nsl_crane
        set kbn = '9'
        where id = #{id};
    </update>

</mapper>